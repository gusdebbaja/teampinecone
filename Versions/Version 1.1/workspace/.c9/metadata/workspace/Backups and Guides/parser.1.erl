{"changed":true,"filter":false,"title":"parser.1.erl","tooltip":"/Backups and Guides/parser.1.erl","value":"-module(parser).\n\n-export([save_tweet/1, couch_connect/0, couch_create_db/0,couch_create_doc/4]).\n\n-define(USERNAME, \"\").\n-define(PASSWORD, \"\").\n-define(OPTIONS, [{basic_auth, {?USERNAME, ?PASSWORD}}]). \n-define(URL, \"http://garak.skip.chalmers.se:5984/\").\n\n%Local host:http://127.0.0.1:5984/\n\n-define(SERVER, couchbeam:server_connection(?URL, [])).\n\n\n%Parsing miner feed into tweets with '#' followed by tweet. Ex: #hello\nsave_tweet(Tweet) -> \n\tStart = string:str(Tweet, \"#\"),\n\tcase Start >= 1 of\n\t\ttrue  ->\tseperate_tweet(string:substr(Tweet, Start+1));\n\t\tfalse ->\tio:format(\"\")\n\tend.\n\n%Seperate the tweets accordingly\nseperate_tweet(Tweet) ->\n\tEnd = string:str(Tweet, \" \"),\n\tcase End >= 1 of\n\t\ttrue  ->\tcouch_save_tweet(string:substr(Tweet, 1, End - 1)),\n\t\t\t\t\tsave_tweet(string:substr(Tweet, End));\n\t\tfalse -> \tcouch_save_tweet(string:substr(Tweet, 1,\tlength(Tweet)))\n\tend.\n\n\n%Check that the characters are 'latin based' using chars a,A to z,Z and numbers 0 to 9\nis_alpha([Char | Rest]) when Char >= $a, Char =< $z ->\n    is_alpha(Rest);\t\nis_alpha([Char | Rest]) when Char >= $A, Char =< $Z ->\n    is_alpha(Rest);\nis_alpha([Char | Rest]) when Char >= $0, Char =< $9 ->\n    is_alpha(Rest);\nis_alpha([]) ->\n    true;\nis_alpha(_) ->\n    false.\n\t%is_alpha(string:strip(Hashtag))\n\t\n\t\ncouch_save_tweet(Hashtag) ->\n    case is_alpha(string:strip(Hashtag)) of\n        true -> io:format(Hashtag ++ \"~n\"),\n        c;\n        false -> io:format(\"\")\n    end.\n\n%Managing the couchDB on server\n%Connect to futon via http://garak.skip.chalmers.se:5984/_utils/\n\n%Create DB\ncouch_create_db() -> \n\tOptions = [],\n\tServer = ?SERVER,\n\t{ok, _Version} = couchbeam:server_info(Server),\n\t{ok, Db} = couchbeam:create_db(Server, \"pinecone_tweets_db\", Options).\n\n%Open DB\ncouch_open_db(Server) -> \n\tOptions = [],\n\t{ok, _Version} = couchbeam:server_info(Server),\n\t{ok, Db} = couchbeam:open_db(Server, \"pinecone_tweets_db\", Options),\n\tcouch_create_doc(Db, \"#Yolo\", \"25\", \"Alex\").\n\n%Create DB document for each tweet\ncouch_create_doc(DB, Hashtag, Uses, Owner) ->\n\tDoc = {[{<<\"_id\">>, unicode:characters_to_binary(Hashtag, unicode)},\n\t   \t\t{<<\"uses\">>, unicode:characters_to_binary(Uses, unicode)},\n\t   \t\t{<<\"Owner\">>, unicode:characters_to_binary(Owner, unicode)}]},\n   {ok, Doc1} = couchbeam:save_doc(DB, Doc).\n\n%Connect to DB\ncouch_connect() -> \n\tServer = ?SERVER,\n\t{ok, _Version} = couchbeam:server_info(Server),\n\tcouch_open_db(Server).","undoManager":{"mark":0,"position":-1,"stack":[[{"start":{"row":68,"column":28},"end":{"row":68,"column":29},"action":"insert","lines":["g"],"id":15}],[{"start":{"row":68,"column":27},"end":{"row":68,"column":28},"action":"insert","lines":["a"],"id":14}],[{"start":{"row":68,"column":26},"end":{"row":68,"column":27},"action":"insert","lines":["t"],"id":13}],[{"start":{"row":68,"column":25},"end":{"row":68,"column":26},"action":"insert","lines":["h"],"id":12}],[{"start":{"row":68,"column":24},"end":{"row":68,"column":25},"action":"insert","lines":["s"],"id":11}],[{"start":{"row":68,"column":23},"end":{"row":68,"column":24},"action":"insert","lines":["a"],"id":10}],[{"start":{"row":68,"column":22},"end":{"row":68,"column":23},"action":"insert","lines":["H"],"id":9}],[{"start":{"row":68,"column":22},"end":{"row":68,"column":23},"action":"remove","lines":["\""],"id":8}],[{"start":{"row":68,"column":23},"end":{"row":68,"column":24},"action":"remove","lines":["#"],"id":7}],[{"start":{"row":68,"column":24},"end":{"row":68,"column":25},"action":"remove","lines":["Y"],"id":6}],[{"start":{"row":68,"column":25},"end":{"row":68,"column":26},"action":"remove","lines":["o"],"id":5}],[{"start":{"row":68,"column":26},"end":{"row":68,"column":27},"action":"remove","lines":["l"],"id":4}],[{"start":{"row":68,"column":27},"end":{"row":68,"column":28},"action":"remove","lines":["o"],"id":3}],[{"start":{"row":68,"column":28},"end":{"row":68,"column":29},"action":"remove","lines":["\""],"id":2}]]},"ace":{"folds":[],"scrolltop":660,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":81,"column":23},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":52,"state":"start","mode":"ace/mode/erlang"}},"timestamp":1448978039318}