{"changed":false,"filter":false,"title":"test_gen_changes.erl","tooltip":"/Back/Miner/dit029-twitter-miner/examples/test_gen_changes.erl","value":"%%% -*- erlang -*-\n%%%\n%%% This file is part of couchbeam released under the MIT license. \n%%% See the NOTICE for more information.\n\n-module(test_gen_changes).\n\n-behaviour(gen_changes).\n-export([start_link/2,\n         init/1,\n         handle_change/2,\n         handle_call/3,\n         handle_cast/2,\n         handle_info/2,\n         terminate/2]).\n\n-export([get_changes/1]).\n\n\n-record(state, {changes=[]}).\n\nstart_link(Db, Opts) ->\n    gen_changes:start_link(?MODULE, Db, Opts, []).\n\n\ninit([]) ->\n    {ok, #state{}}.\n\nget_changes(Pid) ->\n    gen_changes:call(Pid, get_changes).\n\nhandle_change({done, _LastSeq}, State) ->\n    {noreply, State};\n\n\nhandle_change(Change, State=#state{changes=Changes}) ->\n    NewChanges = [Change|Changes],\n    {noreply, State#state{changes=NewChanges}}.\n\nhandle_call(get_changes, _From, State=#state{changes=Changes}) ->\n    {reply, lists:reverse(Changes), State}.\n\nhandle_cast(_Msg, State) -> {noreply, State}.\n\nhandle_info(Info, State) ->\n    io:format(\"Unknown message: ~p~n\", [Info]),\n    {noreply, State}.\n\nterminate(Reason, _State) ->\n    io:format(\"~p terminating with reason ~p~n\", [?MODULE, Reason]),\n    ok.\n\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":24},"end":{"row":7,"column":24},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1448554095937}